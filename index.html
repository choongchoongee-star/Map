<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>당무 지도 (Dangmoo Map)</title>
    <link rel="icon" href="assets/icon.png" type="image/png">
    <link rel="stylesheet" href="css/style.css">
    <!-- Naver Maps API -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=3rh84i5w65&submodules=geocoder"></script>
</head>
<body>
    <div id="app">
        <header>
            <div class="header-left">
                <button id="menu-toggle" aria-label="Toggle Menu">☰</button>
                <div class="logo">
                    <img src="assets/icon.png" alt="🥕" class="logo-img">
                    당무 지도
                </div>
            </div>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="검색...">
                <button id="search-btn">검색</button>
            </div>
            <div class="user-info">
                <span id="username-display">...</span>
                <button id="login-btn" class="auth-btn">로그인 (Google)</button>
                <button id="logout-btn" class="auth-btn hidden">로그아웃</button>
            </div>
        </header>

        <main>
            <aside id="sidebar">
                <div class="sidebar-header">
                    <div class="session-switcher">
                        <label for="session-select" class="filter-label">목록 선택:</label>
                        <select id="session-select">
                            <option value="session_001">전체 공유 리스트</option>
                        </select>
                        <button id="manage-sessions-btn" class="icon-btn" title="공유 세션 관리">⚙️</button>
                    </div>
                    <h3>리스트 항목</h3>
                    <div class="sort-container">
                        <select id="sort-select">
                            <option value="date">최신순</option>
                            <option value="likes">좋아요순</option>
                            <option value="distance">거리순</option>
                        </select>
                    </div>
                    <div class="category-filter-container">
                        <select id="category-select">
                            <option value="all">모든 카테고리</option>
                        </select>
                    </div>
                    <div class="filter-container">
                        <label class="switch">
                            <input type="checkbox" id="filter-visible">
                            <span class="slider round"></span>
                        </label>
                        <span class="filter-label">현재 지도 내 검색</span>
                    </div>
                </div>
                <ul id="place-list">
                    <!-- 맛집 목록이 여기에 동적으로 추가됩니다 -->
                </ul>
                <div id="pagination" class="pagination-container">
                    <!-- 페이지네이션 버튼이 여기에 추가됩니다 -->
                </div>
            </aside>
            <div id="map"></div>
        </main>

        <div id="search-results-modal" class="modal hidden">
            <div class="modal-content">
                <h3>검색 결과</h3>
                <ul id="search-results-list"></ul>
                <button id="close-modal">닫기</button>
            </div>
        </div>

        <div id="session-modal" class="modal hidden">
            <div class="modal-content">
                <h3>공유 세션 관리</h3>
                <div class="session-actions">
                    <div class="action-group">
                        <h4>새 공유 세션 생성</h4>
                        <input type="text" id="new-session-name" placeholder="세션 이름 (예: 친구들과 맛집)">
                        <button id="create-session-btn">생성</button>
                    </div>
                    <hr>
                    <div class="action-group">
                        <h4>세션 참여 (코드로 초대)</h4>
                        <input type="text" id="join-session-code" placeholder="초대 코드 입력">
                        <button id="join-session-btn">참여</button>
                    </div>
                </div>
                <button id="close-session-modal">닫기</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
